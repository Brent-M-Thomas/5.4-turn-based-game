{"version":3,"sources":["js/setup.js","templates/hero-battle.js","js/character.js","js/app.js"],"sourcesContent":["var AppTemplates = {};\n","AppTemplates['hero-battle'] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"\";\n},\"useData\":true});","// end turn after  attack\nvar logWindow = $('.narration-window');\n\nfunction Character(options) {\n  options = options || {};\n  var hitPoints = options.hitPoints || 100;\n  this.weapons = options.weapons || {};\n  this.maxHitPoints = hitPoints;\n  this.logDamage = function(damage) {\n    logWindow.html(this + 'takes' + damage + 'points of damage');\n  };\n\n  this.takeDamage = function(damage) { hitPoints -=  damage; };\n\n  this.on('attacked', function(amount) {\n    this.takeDamage(amount);\n    this.logDamage(amount);\n  });\n\n  this.getHealth = function() {return hitPoints;};\n}\n\nCharacter.prototype = _.extend({\n  constructor: Character,\n\n  getAttackStrength: function(weaponIndex) {\n    if (this.weapons[weaponIndex]) {\n      return this.weapons[weaponIndex].damage;\n    }\n\n    return 5;\n  }\n}, Backbone.Events);\n\nfunction Hero(options) {\n  Character.call(this, options);\n}\n\nHero.prototype = _.defaults({\n  constructor: Hero,\n\n  attack: function(hostile, weapon) {\n    hostile.trigger('attacked', this.getAttackStrength(weapon));\n  }\n\n}, Character.prototype);\n\nvar mal = new Hero({\n  hitPoints: 120,\n  weapons: [{name: 'sidearm', damage: 15}, {name: 'fist', damage: 5}],\n  image: 'http://photos1.blogger.com/img/122/2967/320/Malcolm%20Reynolds.jpg',\n  title: 'Captain',\n  firstname: 'Malcolm',\n  lastname: 'Reynolds',\n  nickname: 'Mal'\n});\n\nvar jayne = new Hero({\n  hitPoints: 80,\n  weapons: [{name: 'Vera', damage: 25}, {name: 'fist', damage: 8}],\n  image: 'http://static.comicvine.com/uploads/original/3/31274/1365260-serenity_promo_s_adam_baldwin_2007567_261_400.jpg',\n  title: '',\n  firstname: 'Jayne',\n  lastname: 'Cobb',\n  nickname: 'Jayne'\n});\n\nvar zoe = new Hero({\n  hitPoints: 100,\n  weapons: [{name: 'maresLeg', damage: 20}, {name: 'stockStrike', damage: 8}],\n  image: 'https://s-media-cache-ak0.pinimg.com/736x/af/e1/b1/afe1b19c2e51b89b274dab86850e82ba.jpg',\n  title: '',\n  firstname: 'Zoe',\n  lastname: 'Washburne',\n  nickname: 'Zoe'\n});\n\nfunction Enemy(options) {\n  Character.call(this, options);\n}\n\nEnemy.prototype = _.defaults({\n  constructor: Enemy,\n\n  attack: function(hostile, weapon) {\n    hostile.trigger('attacked', this.getAttackStrength());\n  },\n\n  getAttackStrength: function() {\n    return _.sample(this.weapons).damage;\n  }\n\n}, Character.prototype);\n\nvar allianceSoldier = new Enemy({\n  hitPoints: 80,\n  image:'http://i198.photobucket.com/albums/aa160/pennausamike/trainjob190.jpg',\n  weapons: [{name: 'Rifle', damage: 10}]\n});\n\nvar reaver = new Enemy({\n  hitPoints: 60,\n  image:'http://www.toymania.com/news/images/0905_dst_reaver1_sm.jpg',\n  weapons: [{name: 'feralAttack', damage: 20}]\n});\n\n","(function() {\nvar weapon1 = $('.weapon1');\nvar weapon2 = $('.weapon2');\nvar special = $('.special');\nvar healthBar = $('.health-bar-current');\n\nvar heroes = [mal];\nmal.takeDamage(10);\nvar enemies = [allianceSoldier];\nvar healthPct = function(character) {\n  return character.getHealth() / character.maxHitPoints * 100 ;\n};\n\nfunction Game() {\n  this.on('takeTurnWithWeapon', function(weaponIndex) {\n    heroes[0].attack(enemies[0], weaponIndex);\n    this.checkEnemyDead();\n    enemies[0].attack(heroes[0]);\n    this.checkHeroDead();\n\n    this.trigger('change');\n  });\n}\n\nGame.prototype = _.extend({\n  constructor: Game,\n  checkEnemyDead: function() {\n    if (enemies[0].isDead === true) {\n      enemies.shift();\n      game.trigger('change'); /*is this right?*/\n    } else {\n      return;\n    }\n  },\n\n  checkHeroDead: function() {\n    if (heroes[0].isDead === true) {\n      heroes.shift();\n      game.trigger('change'); /*is this right?*/\n    } else {\n      return;\n    }\n  },\n\n  gameOver: function() {\n    if (enemies.length <= 0) {\n      this.heroWins = true;\n    }\n\n    return this.heroWins || heroes.length <= 0;\n  }\n}, Backbone.Events);\n\nvar game = new Game();\n\ngame.on('change', function() {\n  healthBar.css('width', (healthPct(heroes[0]) + '%'));\n  if (!game.gameOver()) {\n    logWindow.append('The battle continues...');\n    return;\n  }\n\n  if (game.heroWins) {\n    logWindow.html('You Win!');\n  } else {\n    logWindow.html('You Lose!');\n  }\n});\n\nweapon1.on('click', function() {\n  game.trigger('takeTurnWithWeapon', 0);\n});\n\nweapon2.on('click', function() {\n  game.trigger('takeTurnWithWeapon', 1);\n});\n\n// function heroTurn(heroturn) {\n//   if (heroturn === 1) {\n//     isActive();\n//   }\n//   else if (heroturn === 2 && heroes.length > 1) {\n//     isActive();\n//   }\n//   else if (heroturn === 3  && heroes.length > 2) {\n//     isActive();\n//   } else {\n//     enemyTurn(1);\n//   }\n// }\n\n// function enemyTurn(enemyturn) {\n//   if (enemyturn === 1) {\n//     enemies[enemyturn] = isActive;\n//   }\n//   else if (enemyturn === 2 && enemies.length > 1) {\n//     enemies[enemyturn] = isActive;\n//   }\n//   else if (enemyturn === 3 && enemies.length > 2) {\n//     enemies[enemyturn] = isActive;\n//   } else if (enemyturn > 3) {\n//     heroTurn(1);\n//   }\n// }\n\n// heroTurn(1);\n})();\n"],"names":[],"mappings":"AAAA;;ACAA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;","file":"app.js"}